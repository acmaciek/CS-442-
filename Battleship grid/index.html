<!DOCTYPE html>
<html>
	<head>
		<link rel = "stylesheet" type = "text/css" href="style.css">
	</head>

	<body>
		<h1>BATTLESHIP</h1>
		<div id = "parent">
			<div class="column" id = "button1"></div>
			<div class="column" id = "button1">1</div>
			<div class="column" id = "button2">2</div>
			<div class="column" id = "button3">3</div>
			<div class="column" id="button4">4</div>
			<div class="column" id="button5">5</div>
			<div class="column" id="button6">6</div>
			<div class="column" id="button7">7</div>
				<div class="row">1</div>
				<div class="button" id = "1">1</div>
				<div class="button" id = "2">2</div>
				<div class="button" id = "3">3</div>
				<div class="button" id="4">4</div>
				<div class="button" id="5">5</div>
				<div class="button" id="6">6</div>
				<div class="button" id="7">7</div>
				<div class="row">2</div>
				<div class="button" id="8">8</div>
				<div class="button" id="9">9</div>
				<div class="button" id="10">10</div>
				<div class="button" id="11">11</div>
				<div class="button" id="12">12</div>
				<div class="button" id="13">13</div>
				<div class="button" id="14">14</div>
				<div class="row">3</div>
				<div class="button" id="15">15</div>
				<div class="button" id="16">16</div>
				<div class="button" id="17">17</div>
				<div class="button" id="18">18</div>
				<div class="button" id="19">19</div>
				<div class="button" id="20">20</div>
				<div class="button" id="21">21</div>
				<div class="row">4</div>
				<div class="button" id="22">22</div>
				<div class="button" id="23">23</div>
				<div class="button" id="24">24</div>
				<div class="button" id="25">25</div>
				<div class="button" id="26">26</div>
				<div class="button" id="27">27</div>
				<div class="button" id="28">28</div>
				<div class="row">5</div>
				<div class="button" id="29">29</div>
				<div class="button" id="30">30</div>
				<div class="button" id="31">31</div>
				<div class="button" id="32">32</div>
				<div class="button" id="33">33</div>
				<div class="button" id="34">34</div>
				<div class="button" id="35">35</div>
				<div class="row">6</div>
				<div class="button" id="36">36</div>
				<div class="button" id="37">37</div>
				<div class="button" id="38">38</div>
				<div class="button" id="39">39</div>
				<div class="button" id="40">40</div>
				<div class="button" id="41">41</div>
				<div class="button" id="42">42</div>
				<div class="row">7</div>
				<div class="button" id="43">43</div>
				<div class="button" id="44">44</div>
				<div class="button" id="45">45</div>
				<div class="button" id="46">46</div>
				<div class="button" id="47">47</div>
				<div class="button" id="48">48</div>
				<div class="button" id="49">49</div>




					<div class="column" id = "button1"></div>
					<div class="column" id = "button1">1</div>
					<div class="column" id = "button2">2</div>
					<div class="column" id = "button3">3</div>
					<div class="column" id="button4">4</div>
					<div class="column" id="button5">5</div>
					<div class="column" id="button6">6</div>
					<div class="column" id="button7">7</div>
						<div class="row">1</div>
						<div class="button" id = "51">1</div>
						<div class="button" id = "52">2</div>
						<div class="button" id = "53">3</div>
						<div class="button" id="54">4</div>
						<div class="button" id="55">5</div>
						<div class="button" id="56">6</div>
						<div class="button" id="57">7</div>
						<div class="row">2</div>
						<div class="button" id="58">8</div>
						<div class="button" id="59">9</div>
						<div class="button" id="60">10</div>
						<div class="button" id="61">11</div>
						<div class="button" id="62">12</div>
						<div class="button" id="63">13</div>
						<div class="button" id="64">14</div>
						<div class="row">3</div>
						<div class="button" id="65">15</div>
						<div class="button" id="66">16</div>
						<div class="button" id="67">17</div>
						<div class="button" id="68">18</div>
						<div class="button" id="69">19</div>
						<div class="button" id="70">20</div>
						<div class="button" id="71">21</div>
						<div class="row">4</div>
						<div class="button" id="72">22</div>
						<div class="button" id="73">23</div>
						<div class="button" id="74">24</div>
						<div class="button" id="75">25</div>
						<div class="button" id="76">26</div>
						<div class="button" id="77">27</div>
						<div class="button" id="78">28</div>
						<div class="row">5</div>
						<div class="button" id="79">29</div>
						<div class="button" id="80">30</div>
						<div class="button" id="81">31</div>
						<div class="button" id="82">32</div>
						<div class="button" id="83">33</div>
						<div class="button" id="84">34</div>
						<div class="button" id="85">35</div>
						<div class="row">6</div>
						<div class="button" id="86">36</div>
						<div class="button" id="87">37</div>
						<div class="button" id="88">38</div>
						<div class="button" id="89">39</div>
						<div class="button" id="90">40</div>
						<div class="button" id="91">41</div>
						<div class="button" id="92">42</div>
						<div class="row">7</div>
						<div class="button" id="93">43</div>
						<div class="button" id="94">44</div>
						<div class="button" id="95">45</div>
						<div class="button" id="96">46</div>
						<div class="button" id="97">47</div>
						<div class="button" id="98">48</div>
						<div class="button" id="99">49</div>
			<img src="https://img.icons8.com/ios/26/000000/battleship-filled.png" id="ball">

		</div>

		<script type="text/javascript">
			var button1 = document.getElementById('button1');
			var button2 = document.getElementById('button2');
			var button3 = document.getElementById('button3');
			var button4 = document.getElementById('button4');
			var button5 = document.getElementById('button5');
			var button6 = document.getElementById('button6');
			var button7 = document.getElementById('button7');
			var button8 = document.getElementById('button8');
			var button9 = document.getElementById('button9');
			var button10 = document.getElementById('button10');
			var button11 = document.getElementById('button11');
			var button12 = document.getElementById('button12');
			var button13 = document.getElementById('button13');
			var button14 = document.getElementById('button14');
			var button15 = document.getElementById('button15');
			var button16 = document.getElementById('button16');
			var button17 = document.getElementById('button17');
			var button18 = document.getElementById('button18');
			var button19 = document.getElementById('button19');
			var button20 = document.getElementById('button20');
			var button21 = document.getElementById('button21');
			var button22 = document.getElementById('button22');
			var button23 = document.getElementById('button23');
			var button24 = document.getElementById('button24');
			var button25 = document.getElementById('button25');
			var button26 = document.getElementById('button26');
			var button27 = document.getElementById('button27');
			var button28 = document.getElementById('button28');
			var button29 = document.getElementById('button29');
			var button30 = document.getElementById('button30');
			var button31 = document.getElementById('button31');
			var button32 = document.getElementById('button32');
			var button33 = document.getElementById('button33');
			var button34 = document.getElementById('button34');
			var button35 = document.getElementById('button35');
			var button36 = document.getElementById('button36');
			var button37 = document.getElementById('button37');
			var button38 = document.getElementById('button38');
			var button39 = document.getElementById('button39');
			var button40 = document.getElementById('button40');
			var button41 = document.getElementById('button41');
			var button42 = document.getElementById('button42');
			var button43 = document.getElementById('button43');
			var button44 = document.getElementById('button44');
			var button45 = document.getElementById('button45');
			var button46 = document.getElementById('button46');
			var button47 = document.getElementById('button47');
			var button48 = document.getElementById('button48');
			var button49 = document.getElementById('button49');

		 	var buttonArray = document.getElementsByClassName('button');
			var gridArray = new Array(49);

			for( let i = 0; i < buttonArray.length + 1; i++) {
				gridArray[i] = false;
			}

			// for(let i = 0; i < 7; ++i) { //Place ships on the board
			// 	var number = prompt("Enter the position of your ship from 1 to 49 \n" + "Ships used: " + i + "/7" , "");
			// 	if (isNaN(number))
  		// 	{
     	// 		alert("Input must be a number");
			// 		i--;
      //   }
			// 	if(gridArray[number] === true) {
			// 		alert("You already placed your ship in that position");
			// 		i--;
			// 	}
			// 	else{
			// 		gridArray[number] = true;
			// 	}
			// }

			var reply_click = function()
			{
				if(gridArray[this.innerHTML] === false) { //miss
					this.innerHTML = "X";
					this.style.background = "red";
				}else if(gridArray[this.innerHTML] === true) { //hit
					this.innerHTML = "O";
					this.style.background = "green";
				}

			}

			for( let i = 0; i < buttonArray.length; i++) {
				buttonArray[i].onclick = reply_click;
			}






			let currentDroppable = null;

    	ball.onmousedown = function(event) {

      let shiftX = event.clientX - ball.getBoundingClientRect().left;
      let shiftY = event.clientY - ball.getBoundingClientRect().top;

      ball.style.position = 'absolute';
      ball.style.zIndex = 1000;
      document.body.append(ball);

      moveAt(event.pageX, event.pageY);

      function moveAt(pageX, pageY) {
        ball.style.left = pageX - shiftX + 'px';
        ball.style.top = pageY - shiftY + 'px';
      }

      function onMouseMove(event) {
        moveAt(event.pageX, event.pageY);

         ball.hidden = true;
        let elemBelow = document.elementFromPoint(event.clientX, event.clientY);
        ball.hidden = false;

        if (!elemBelow) return;

        let droppableBelow = elemBelow.closest('.button');
        if (currentDroppable != droppableBelow) {
          if (currentDroppable) { // null when we were not over a droppable before this event
						currentDroppable.style.background = '';
          }
          currentDroppable = droppableBelow;
        }
      }

      document.addEventListener('mousemove', onMouseMove);

      ball.onmouseup = function() {
				currentDroppable.style.background = 'orange';
				gridArray[parseInt(currentDroppable.id)- 50] = true;
        document.removeEventListener('mousemove', onMouseMove);
        ball.onmouseup = null;
      };

    };

    ball.ondragstart = function() {
      return false;
    };
		</script>
	</body>
</html>
